{"ast":null,"code":"// 引入组件 以及 插件\nimport Header from \"@/components/Header.vue\";\nimport Footer from \"@/components/Footer.vue\";\nimport Pagination from \"@/components/pagenation.vue\";\nexport default {\n  name: \"FindMajor\",\n  components: {\n    Header,\n    Footer,\n    Pagination\n  },\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      token: \"\",\n      subs: [{\n        title: \"本科\",\n        active: true\n      }, {\n        title: \"专科\",\n        active: false\n      }],\n      activeSub: {\n        title: \"本科\"\n      },\n      majorName: \"\",\n      list: [],\n      school: {},\n      total: 30,\n      pagination: {\n        pageSize: 9,\n        p: 1\n      }\n    };\n  },\n  mounted() {\n    this.token = window.localStorage.getItem(\"X-token\");\n    // 获取专业\n    this.getMajorList();\n  },\n  methods: {\n    changePage(pager) {\n      this.pagination.p = pager.page;\n      // 分页器回调\n      this.$emit(\"change\", pager);\n      this.getMajorList();\n    },\n    // 获取专业\n    getMajorList() {\n      let _this = this;\n      this.$http.post(this.url + \"/major/find\", {\n        name: _this.majorName,\n        level: _this.activeSub.title,\n        pageSize: _this.pagination.p,\n        pageNum: _this.pagination.pageSize\n      }, {\n        headers: {\n          Authorization: _this.token\n        }\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this.total = res.data.count;\n          _this.list = res.data.data;\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    // 切换门类\n    changeTab(item) {\n      for (var i = 0; i < this.subs.length; i++) {\n        this.subs[i].active = false;\n      }\n      item.active = true;\n      this.activeSub.title = item.title;\n      this.getMajorList();\n    },\n    // 搜索专业\n    searchMajor() {\n      this.pagination.p = 1;\n      this.getMajorList();\n    },\n    // 收藏\n    collect(item) {\n      let _this = this;\n      this.$http.post(this.url + \"/user/collect\", {\n        majorId: item.id,\n        state: 0\n      }, {\n        headers: {\n          Authorization: _this.token\n        }\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this.$message({\n            message: \"收藏成功\",\n            type: \"success\"\n          });\n        } else {\n          this.$message({\n            message: \"收藏失败\",\n            type: \"warning\"\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Header","Footer","Pagination","name","components","data","url","token","subs","title","active","activeSub","majorName","list","school","total","pagination","pageSize","p","mounted","window","localStorage","getItem","getMajorList","methods","changePage","pager","page","$emit","_this","$http","post","level","pageNum","headers","Authorization","then","res","code","count","catch","error","console","log","changeTab","item","i","length","searchMajor","collect","majorId","id","state","$message","message","type"],"sources":["src/pages/major/index.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 头部组件 -->\n    <Header></Header>\n\n    <!-- 背景区域 -->\n    <section class=\"bg_section\">\n      <div class=\"bg_search\">\n        <input\n          type=\"text\"\n          placeholder=\"搜索你感兴趣的专业\"\n          v-model=\"majorName\"\n        />\n        <button @click=\"searchMajor\">查询</button>\n      </div>\n    </section>\n\n    <!-- 列表区域 -->\n    <section class=\"list_section\">\n      <div class=\"container\">\n        <div class=\"list\">\n          <div class=\"list_subs\">\n            <div class=\"tab\">门类</div>\n            <div\n              class=\"list_sub\"\n              v-for=\"(item, index) in subs\"\n              :key=\"index\"\n              :class=\"item.active == true ? 'active' : ''\"\n              @click=\"changeTab(item)\"\n            >\n              {{ item.title }}\n            </div>\n          </div>\n          <div class=\"list_items\">\n            <div class=\"tab\">专业名称</div>\n            <div class=\"list_item\">\n              <div class=\"item\" v-for=\"(item, index) in list\" :key=\"index\">\n                <div class=\"item_title\">\n                  {{ item.name }}\n                </div>\n                <div class=\"item_other\">\n                  <span> 专业代码：{{ item.code }} </span>\n                  <span> 所属学校：{{ item.universityName }} </span>\n                  <span> 学校性质：{{ item.nature }} | {{ item.type }} </span>\n                </div>\n                <div class=\"item_open\" @click=\"collect(item)\">收藏</div>\n              </div>\n            </div>\n            <Pagination\n              @change=\"changePage\"\n              :current=\"pagination.p\"\n              :pageSize=\"pagination.pageSize\"\n              :total=\"total\"\n              :showQuickJumper=\"true\"\n              :showTotal=\"true\"\n              placement=\"right\"\n              v-if=\"pagination && total\"\n            />\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <!-- 尾部组件 -->\n    <Footer></Footer>\n  </div>\n</template>\n\n<script>\n// 引入组件 以及 插件\nimport Header from \"@/components/Header.vue\";\nimport Footer from \"@/components/Footer.vue\";\nimport Pagination from \"@/components/pagenation.vue\";\nexport default {\n  name: \"FindMajor\",\n  components: {\n    Header,\n    Footer,\n    Pagination,\n  },\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      token: \"\",\n      subs: [\n        {\n          title: \"本科\",\n          active: true,\n        },\n        {\n          title: \"专科\",\n          active: false,\n        },\n      ],\n      activeSub: {\n        title: \"本科\",\n      },\n      majorName: \"\",\n      list: [],\n      school: {},\n      total: 30,\n      pagination: {\n        pageSize: 9,\n        p: 1,\n      },\n    };\n  },\n  mounted() {\n    this.token = window.localStorage.getItem(\"X-token\");\n    // 获取专业\n    this.getMajorList();\n  },\n  methods: {\n    changePage(pager) {\n      this.pagination.p = pager.page;\n      // 分页器回调\n      this.$emit(\"change\", pager);\n      this.getMajorList();\n    },\n    // 获取专业\n    getMajorList() {\n      let _this = this;\n      this.$http\n        .post(\n          this.url + \"/major/find\",\n          {\n            name: _this.majorName,\n            level: _this.activeSub.title,\n            pageSize: _this.pagination.p,\n            pageNum: _this.pagination.pageSize,\n          },\n          {\n            headers: {\n              Authorization: _this.token,\n            },\n          }\n        )\n        .then(function (res) {\n          if (res.data.code == 200) {\n            _this.total = res.data.count;\n            _this.list = res.data.data;\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    // 切换门类\n    changeTab(item) {\n      for (var i = 0; i < this.subs.length; i++) {\n        this.subs[i].active = false;\n      }\n      item.active = true;\n      this.activeSub.title = item.title;\n      this.getMajorList();\n    },\n    // 搜索专业\n    searchMajor() {\n      this.pagination.p = 1;\n      this.getMajorList();\n    },\n    // 收藏\n    collect(item) {\n      let _this = this;\n      this.$http\n        .post(\n          this.url + \"/user/collect\",\n          {\n            majorId: item.id,\n            state: 0,\n          },\n          {\n            headers: {\n              Authorization: _this.token,\n            },\n          }\n        )\n        .then(function (res) {\n          if (res.data.code == 200) {\n            _this.$message({\n              message: \"收藏成功\",\n              type: \"success\",\n            });\n          } else {\n            this.$message({\n              message: \"收藏失败\",\n              type: \"warning\",\n            });\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n// 背景区域\n.bg_section {\n  width: 100%;\n  height: 10rem;\n  background: url(\"../../assets/uploads/major/bg.png\") no-repeat center center;\n  background-size: cover;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .bg_search {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    justify-content: center;\n    input {\n      width: 40%;\n      height: 2.8rem;\n      background-color: #fff;\n      border-top-left-radius: 0.4rem;\n      border-bottom-left-radius: 0.4rem;\n      border: 0;\n      padding-left: 1rem;\n    }\n    button {\n      width: 7%;\n      height: 2.8rem;\n      background-color: #427dff;\n      color: #fff;\n      font-weight: bolder;\n      border: 0;\n      border-top-right-radius: 0.4rem;\n      border-bottom-right-radius: 0.4rem;\n    }\n  }\n}\n\n//列表区域\n.list_section {\n  margin: 2rem 0;\n  .tabs {\n    width: 100%;\n    height: 3rem;\n    display: flex;\n    border-radius: 0.4rem;\n    background-color: #fff;\n  }\n  .list {\n    display: flex;\n    > div {\n      .tab {\n        border: 0.05rem solid #ccc;\n        line-height: 3rem;\n        padding-left: 1rem;\n        font-weight: bolder;\n        font-size: 1rem;\n        background-color: #fff;\n      }\n      &:nth-child(1) {\n        width: 20%;\n        background-color: #fff;\n      }\n      &:nth-child(2) {\n        width: 80%;\n        border: 0.05rem solid #ccc;\n        border-top: 0;\n        .list_item {\n          padding: 1rem;\n        }\n        .item {\n          position: relative;\n          padding: 1.5rem 0;\n          border-bottom: 0.05rem solid #ccc;\n          &:last-child {\n            border-bottom: 0;\n          }\n          .item_title {\n            font-size: 1.5rem;\n            font-weight: bolder;\n            color: #333;\n          }\n          .item_other {\n            display: flex;\n            margin-top: 1.5rem;\n            span {\n              margin-right: 3rem;\n              font-size: 0.9rem;\n              color: #666;\n            }\n          }\n          .item_open {\n            cursor: pointer;\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n            right: 1rem;\n            padding: 0.4rem 0.6rem;\n            color: #427dff;\n            font-weight: bolder;\n            font-size: 0.9rem;\n            border: 0.05rem solid #427dff;\n            border-radius: 0.5rem;\n          }\n        }\n      }\n      .list_sub {\n        padding: 1rem;\n        border: 0.05rem solid #ccc;\n        border-top: 0;\n        cursor: pointer;\n        &.active {\n          color: #427dff;\n          font-weight: bolder;\n        }\n      }\n      .list_major {\n        padding: 1rem;\n        border: 0.05rem solid #ccc;\n        border-top: 0;\n        &.active {\n          color: #427dff;\n          font-weight: bolder;\n        }\n      }\n    }\n  }\n}\n\n@media screen and (max-width: 750px) {\n  .list_section {\n    .list {\n      flex-wrap: wrap;\n      > div {\n        &:nth-child(2) {\n          .item {\n            .item_open {\n              transform: translateY(-90%);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n@media screen and (max-width: 420px) {\n}\n</style>"],"mappings":"AAqEA;AACA,OAAAA,MAAA;AACA,OAAAC,MAAA;AACA,OAAAC,UAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAJ,MAAA;IACAC,MAAA;IACAC;EACA;EACAG,KAAA;IACA;MACAC,GAAA;MACAC,KAAA;MACAC,IAAA,GACA;QACAC,KAAA;QACAC,MAAA;MACA,GACA;QACAD,KAAA;QACAC,MAAA;MACA,EACA;MACAC,SAAA;QACAF,KAAA;MACA;MACAG,SAAA;MACAC,IAAA;MACAC,MAAA;MACAC,KAAA;MACAC,UAAA;QACAC,QAAA;QACAC,CAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAZ,KAAA,GAAAa,MAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,WAAAC,KAAA;MACA,KAAAV,UAAA,CAAAE,CAAA,GAAAQ,KAAA,CAAAC,IAAA;MACA;MACA,KAAAC,KAAA,WAAAF,KAAA;MACA,KAAAH,YAAA;IACA;IACA;IACAA,aAAA;MACA,IAAAM,KAAA;MACA,KAAAC,KAAA,CACAC,IAAA,CACA,KAAAzB,GAAA,kBACA;QACAH,IAAA,EAAA0B,KAAA,CAAAjB,SAAA;QACAoB,KAAA,EAAAH,KAAA,CAAAlB,SAAA,CAAAF,KAAA;QACAQ,QAAA,EAAAY,KAAA,CAAAb,UAAA,CAAAE,CAAA;QACAe,OAAA,EAAAJ,KAAA,CAAAb,UAAA,CAAAC;MACA,GACA;QACAiB,OAAA;UACAC,aAAA,EAAAN,KAAA,CAAAtB;QACA;MACA,CACA,EACA6B,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAhC,IAAA,CAAAiC,IAAA;UACAT,KAAA,CAAAd,KAAA,GAAAsB,GAAA,CAAAhC,IAAA,CAAAkC,KAAA;UACAV,KAAA,CAAAhB,IAAA,GAAAwB,GAAA,CAAAhC,IAAA,CAAAA,IAAA;QACA;MACA,GACAmC,KAAA,WAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACA;IACAG,UAAAC,IAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAAtC,IAAA,CAAAuC,MAAA,EAAAD,CAAA;QACA,KAAAtC,IAAA,CAAAsC,CAAA,EAAApC,MAAA;MACA;MACAmC,IAAA,CAAAnC,MAAA;MACA,KAAAC,SAAA,CAAAF,KAAA,GAAAoC,IAAA,CAAApC,KAAA;MACA,KAAAc,YAAA;IACA;IACA;IACAyB,YAAA;MACA,KAAAhC,UAAA,CAAAE,CAAA;MACA,KAAAK,YAAA;IACA;IACA;IACA0B,QAAAJ,IAAA;MACA,IAAAhB,KAAA;MACA,KAAAC,KAAA,CACAC,IAAA,CACA,KAAAzB,GAAA,oBACA;QACA4C,OAAA,EAAAL,IAAA,CAAAM,EAAA;QACAC,KAAA;MACA,GACA;QACAlB,OAAA;UACAC,aAAA,EAAAN,KAAA,CAAAtB;QACA;MACA,CACA,EACA6B,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAhC,IAAA,CAAAiC,IAAA;UACAT,KAAA,CAAAwB,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;QACA;UACA,KAAAF,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;QACA;MACA,GACAf,KAAA,WAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}