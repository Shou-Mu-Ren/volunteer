{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Forget\",\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      codeTime: 60,\n      codeFlag: false,\n      forgetDto: {\n        phone: \"\",\n        password: \"\",\n        makePassword: \"\",\n        code: \"\"\n      }\n    };\n  },\n  methods: {\n    // 获取验证码\n    requireCode() {\n      let _this = this;\n      if (this.forgetDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\"\n        });\n      } else {\n        this.codeFlag = true;\n        this.timer = setInterval(() => {\n          if (this.codeTime > 0) {\n            this.codeTime--;\n          } else {\n            this.codeTime = 60;\n            clearInterval(this.timer);\n          }\n        }, 1000);\n        this.$http.post(this.url + \"/user/sendForget\", {\n          phone: this.forgetDto.phone\n        }).then(function (res) {\n          if (res.data.code == 200) {\n            _this.$message({\n              message: res.data.msg,\n              type: \"success\"\n            });\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n    // 修改密码\n    changePsd() {\n      let _this = this;\n      if (this.forgetDto.phone == '') {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\"\n        });\n      } else if (this.forgetDto.code == '') {\n        this.$message({\n          message: \"请输入验证码\",\n          type: \"warning\"\n        });\n      } else if (this.forgetDto.password == '') {\n        this.$message({\n          message: \"请输入密码\",\n          type: \"warning\"\n        });\n      } else if (this.forgetDto.makePassword == '') {\n        this.$message({\n          message: \"请输入确认密码\",\n          type: \"warning\"\n        });\n      } else if (this.forgetDto.password != this.forgetDto.makePassword) {\n        this.$message({\n          message: \"两次输入密码不同\",\n          type: \"warning\"\n        });\n      } else {\n        this.$http.post(this.url + \"/user/forget\", {\n          phone: _this.forgetDto.phone,\n          password: _this.forgetDto.password,\n          makePassword: _this.forgetDto.makePassword,\n          code: _this.forgetDto.code\n        }).then(function (res) {\n          if (res.data.code == 200) {\n            _this.$message({\n              message: res.data.msg,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              _this.$router.push({\n                name: 'login'\n              });\n            }, 1000);\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","url","codeTime","codeFlag","forgetDto","phone","password","makePassword","code","methods","requireCode","_this","$message","message","type","timer","setInterval","clearInterval","$http","post","then","res","msg","catch","error","console","log","changePsd","setTimeout","$router","push"],"sources":["src/pages/forget/index.vue"],"sourcesContent":["<template>\n  <div class=\"forget\">\n    <!-- 忘记密码logo -->\n    <div class=\"forget_logo\">\n      <img src=\"../../assets/logo.png\" alt=\"\" />\n    </div>\n\n    <!-- 忘记密码表单 -->\n    <div class=\"forget_form\">\n      <div class=\"phone\">\n        <input type=\"text\" placeholder=\"请输入手机号\" v-model=\"forgetDto.phone\"/>\n      </div>\n      <div class=\"code\">\n        <input type=\"text\" placeholder=\"请输入验证码\" v-model=\"forgetDto.code\"/>\n        <div\n          class=\"require_code\"\n          @click=\"requireCode()\"\n          v-show=\"codeFlag == false\"\n        >\n          获取验证码\n        </div>\n        <div class=\"require_code\" v-show=\"codeFlag == true\">\n          {{ codeTime }}s后获取\n        </div>\n      </div>\n      <div class=\"password\">\n        <input type=\"password\" placeholder=\"请输入密码\" v-model=\"forgetDto.password\"/>\n      </div>\n      <div class=\"surePsd\">\n        <input type=\"password\" placeholder=\"请再次输入密码\" v-model=\"forgetDto.makePassword\"/>\n      </div>\n      <div class=\"forget_btn\" @click=\"changePsd\">确认修改</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Forget\",\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      codeTime: 60,\n      codeFlag: false,\n      forgetDto: {\n        phone: \"\",\n        password: \"\",\n        makePassword: \"\",\n        code: \"\",\n      },\n    };\n  },\n  methods: {\n    // 获取验证码\n    requireCode() {\n      let _this = this;\n      if (this.forgetDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\",\n        });\n      } else {\n        this.codeFlag = true;\n        this.timer = setInterval(() => {\n          if (this.codeTime > 0) {\n            this.codeTime--;\n          } else {\n            this.codeTime = 60;\n            clearInterval(this.timer);\n          }\n        }, 1000);\n        this.$http\n          .post(this.url + \"/user/sendForget\", {\n            phone: this.forgetDto.phone,\n          })\n          .then(function (res) {\n            if (res.data.code == 200) {\n              _this.$message({\n                message: res.data.msg,\n                type: \"success\",\n              });\n            } else {\n              _this.$message({\n                message: res.data.msg,\n                type: \"warning\",\n              });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      }\n    },\n\n    // 修改密码\n    changePsd() {\n      let _this = this;\n      if(this.forgetDto.phone == ''){\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\",\n        });\n      }else if(this.forgetDto.code == ''){\n        this.$message({\n          message: \"请输入验证码\",\n          type: \"warning\",\n        });\n      }else if(this.forgetDto.password == ''){\n        this.$message({\n          message: \"请输入密码\",\n          type: \"warning\",\n        });\n      }else if(this.forgetDto.makePassword == ''){\n        this.$message({\n          message: \"请输入确认密码\",\n          type: \"warning\",\n        });\n      }else if(this.forgetDto.password != this.forgetDto.makePassword){\n        this.$message({\n          message: \"两次输入密码不同\",\n          type: \"warning\",\n        });\n      }else{\n              this.$http\n        .post(this.url + \"/user/forget\", {\n          phone: _this.forgetDto.phone,\n          password: _this.forgetDto.password,\n          makePassword: _this.forgetDto.makePassword,\n          code: _this.forgetDto.code,\n        })\n        .then(function (res) {\n          if (res.data.code == 200) {\n            _this.$message({\n              message: res.data.msg,\n              type: \"success\",\n            });\n            setTimeout(() => {\n              _this.$router.push({\n                name:'login'\n              })\n            }, 1000);\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\",\n            });\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.forget {\n  width: 100vw;\n  height: 100vh;\n  background: url(\"../../assets/uploads/login/loginBg.jpg\") no-repeat;\n  background-size: cover;\n  .forget_logo {\n    position: absolute;\n    top: 1rem;\n    left: 1.5rem;\n    width: 15rem;\n    img {\n      width: 100%;\n    }\n  }\n  .forget_form {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 40%;\n    padding: 2rem;\n    background-color: #fff;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 1rem;\n    .phone,\n    .code,\n    .password,\n    .surePsd {\n      width: 100%;\n      height: 3rem;\n      border: 0.05rem solid #ccc;\n      border-radius: 0.4rem;\n      margin-top: 1.5rem;\n      input {\n        width: 100%;\n        height: 100%;\n        border: 0;\n        background-color: transparent;\n        padding-left: 1rem;\n        font-size: 0.9rem;\n      }\n    }\n    .code {\n      position: relative;\n      display: flex;\n      align-items: center;\n      .require_code {\n        position: absolute;\n        right: 1rem;\n        padding: 0.2rem 0.5rem;\n        border: 0.05rem solid #427dff;\n        color: #427dff;\n        font-size: 0.8rem;\n        border-radius: 0.2rem;\n      }\n    }\n    .forget_btn {\n      width: 100%;\n      height: 3rem;\n      border-radius: 0.5rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #427dff;\n      color: #fff;\n      font-weight: bolder;\n      cursor: pointer;\n      margin-top: 1rem;\n    }\n  }\n}\n\n@media screen and (max-width: 991px) {\n  .forget {\n    .forget_form {\n      width: 50%;\n    }\n  }\n}\n@media screen and (max-width: 660px) {\n  .forget {\n    .forget_form {\n      width: 65%;\n    }\n  }\n}\n@media screen and (max-width: 500px) {\n  .forget {\n    .forget_form {\n      width: 75%;\n    }\n  }\n}\n@media screen and (max-width: 420px) {\n  .forget {\n    .forget_form {\n      width: 85%;\n      .phone,\n      .code,\n      .password,\n      .surePsd {\n        height: 4rem;\n      }\n      .forget_btn {\n        height: 4rem;\n      }\n    }\n  }\n}\n</style>"],"mappings":";AAqCA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,GAAA;MACAC,QAAA;MACAC,QAAA;MACAC,SAAA;QACAC,KAAA;QACAC,QAAA;QACAC,YAAA;QACAC,IAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,YAAA;MACA,IAAAC,KAAA;MACA,SAAAP,SAAA,CAAAC,KAAA;QACA,KAAAO,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA;QACA,KAAAX,QAAA;QACA,KAAAY,KAAA,GAAAC,WAAA;UACA,SAAAd,QAAA;YACA,KAAAA,QAAA;UACA;YACA,KAAAA,QAAA;YACAe,aAAA,MAAAF,KAAA;UACA;QACA;QACA,KAAAG,KAAA,CACAC,IAAA,MAAAlB,GAAA;UACAI,KAAA,OAAAD,SAAA,CAAAC;QACA,GACAe,IAAA,WAAAC,GAAA;UACA,IAAAA,GAAA,CAAArB,IAAA,CAAAQ,IAAA;YACAG,KAAA,CAAAC,QAAA;cACAC,OAAA,EAAAQ,GAAA,CAAArB,IAAA,CAAAsB,GAAA;cACAR,IAAA;YACA;UACA;YACAH,KAAA,CAAAC,QAAA;cACAC,OAAA,EAAAQ,GAAA,CAAArB,IAAA,CAAAsB,GAAA;cACAR,IAAA;YACA;UACA;QACA,GACAS,KAAA,WAAAC,KAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACA;MACA;IACA;IAEA;IACAG,UAAA;MACA,IAAAhB,KAAA;MACA,SAAAP,SAAA,CAAAC,KAAA;QACA,KAAAO,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA,gBAAAV,SAAA,CAAAI,IAAA;QACA,KAAAI,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA,gBAAAV,SAAA,CAAAE,QAAA;QACA,KAAAM,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA,gBAAAV,SAAA,CAAAG,YAAA;QACA,KAAAK,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA,gBAAAV,SAAA,CAAAE,QAAA,SAAAF,SAAA,CAAAG,YAAA;QACA,KAAAK,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA;QACA,KAAAI,KAAA,CACAC,IAAA,MAAAlB,GAAA;UACAI,KAAA,EAAAM,KAAA,CAAAP,SAAA,CAAAC,KAAA;UACAC,QAAA,EAAAK,KAAA,CAAAP,SAAA,CAAAE,QAAA;UACAC,YAAA,EAAAI,KAAA,CAAAP,SAAA,CAAAG,YAAA;UACAC,IAAA,EAAAG,KAAA,CAAAP,SAAA,CAAAI;QACA,GACAY,IAAA,WAAAC,GAAA;UACA,IAAAA,GAAA,CAAArB,IAAA,CAAAQ,IAAA;YACAG,KAAA,CAAAC,QAAA;cACAC,OAAA,EAAAQ,GAAA,CAAArB,IAAA,CAAAsB,GAAA;cACAR,IAAA;YACA;YACAc,UAAA;cACAjB,KAAA,CAAAkB,OAAA,CAAAC,IAAA;gBACA/B,IAAA;cACA;YACA;UACA;YACAY,KAAA,CAAAC,QAAA;cACAC,OAAA,EAAAQ,GAAA,CAAArB,IAAA,CAAAsB,GAAA;cACAR,IAAA;YACA;UACA;QACA,GACAS,KAAA,WAAAC,KAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}