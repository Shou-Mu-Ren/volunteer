{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      tabType: \"短信登录\",\n      codeTime: 60,\n      codeFlag: false,\n      tabList: [{\n        name: \"短信登录\",\n        active: true\n      }, {\n        name: \"账号登录\",\n        active: false\n      }],\n      phoneDto: {\n        phone: \"\",\n        code: \"\"\n      },\n      psdDto: {\n        phone: \"\",\n        password: \"\"\n      }\n    };\n  },\n  methods: {\n    // 切换登录方式\n    selectTab(item) {\n      for (var i = 0; i < this.tabList.length; i++) {\n        this.tabList[i].active = false;\n      }\n      this.tabType = item.name;\n      item.active = true;\n    },\n    // 忘记密码\n    forgetPassword() {\n      this.$router.push({\n        name: \"forget\"\n      });\n    },\n    // 获取验证码\n    requireCode() {\n      let _this = this;\n      if (this.phoneDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\"\n        });\n      } else {\n        this.codeFlag = true;\n        this.timer = setInterval(() => {\n          if (this.codeTime > 0) {\n            this.codeTime--;\n          } else {\n            this.codeTime = 60;\n            clearInterval(this.timer);\n          }\n        }, 1000);\n        this.$http.post(this.url + \"/user/sendCode\", {\n          phone: this.phoneDto.phone\n        }).then(function (res) {\n          if (res.data.code == 200) {\n            _this.$message({\n              message: res.data.msg,\n              type: \"success\"\n            });\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n    // 手机号登录\n    phonelogin() {\n      let _this = this;\n      if (this.phoneDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\"\n        });\n      } else if (this.phoneDto.code == \"\") {\n        this.$message({\n          message: \"请填写验证码\",\n          type: \"warning\"\n        });\n      } else {\n        this.$http.post(this.url + \"/user/loginByCode\", {\n          phone: this.phoneDto.phone,\n          code: this.phoneDto.code\n        }).then(function (res) {\n          if (res.data.code == 200) {\n            window.localStorage.setItem(\"X-token\", res.data.data.token);\n            _this.$message({\n              message: \"登录成功\",\n              type: \"success\"\n            });\n            setTimeout(() => {\n              _this.$router.push({\n                name: \"index\"\n              });\n            }, 1000);\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n    // 登录\n    login() {\n      let _this = this;\n      if (this.psdDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\"\n        });\n      } else if (this.psdDto.password == \"\") {\n        this.$message({\n          message: \"请填写密码\",\n          type: \"warning\"\n        });\n      } else {\n        this.$http.post(this.url + \"/user/loginByPassword\", {\n          phone: this.psdDto.phone,\n          password: this.psdDto.password\n        }).then(function (res) {\n          console.log(res);\n          if (res.data.code == 200) {\n            window.localStorage.setItem(\"X-token\", res.data.data.token);\n            _this.$message({\n              message: \"登录成功\",\n              type: \"success\"\n            });\n            setTimeout(() => {\n              _this.$router.push({\n                name: \"index\"\n              });\n            }, 1000);\n          } else {\n            _this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","url","tabType","codeTime","codeFlag","tabList","active","phoneDto","phone","code","psdDto","password","methods","selectTab","item","i","length","forgetPassword","$router","push","requireCode","_this","$message","message","type","timer","setInterval","clearInterval","$http","post","then","res","msg","catch","error","console","log","phonelogin","window","localStorage","setItem","token","setTimeout","login"],"sources":["src/pages/login/index.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <!-- logo区域 -->\n    <div class=\"login_logo\">\n      <img src=\"../../assets/logo.png\" alt=\"\" />\n    </div>\n    <!-- 表单区域 -->\n    <div class=\"login_form\">\n      <!-- 登录方式切换 -->\n      <div class=\"login_tabs\">\n        <div\n          class=\"login_tab\"\n          v-for=\"(item, index) in tabList\"\n          :key=\"index\"\n          :class=\"item.active == true ? 'active' : ''\"\n          @click=\"selectTab(item)\"\n        >\n          {{ item.name }}\n          <div class=\"login_tab_line\"></div>\n        </div>\n      </div>\n\n      <div class=\"login_msg\">\n        我们将根据你的报考信息，为你推荐了一些院校，现在需要你登录，以便保存的你报考志愿。\n      </div>\n\n      <!-- 短信登录 -->\n      <div class=\"login_code_form\" v-if=\"tabType == '短信登录'\">\n        <div class=\"phone\">\n          <input\n            type=\"text\"\n            placeholder=\"请输入手机号\"\n            v-model=\"phoneDto.phone\"\n          />\n        </div>\n        <div class=\"code\">\n          <input\n            type=\"text\"\n            placeholder=\"请输入验证码\"\n            v-model=\"phoneDto.code\"\n          />\n          <div\n            class=\"require_code\"\n            @click=\"requireCode()\"\n            v-show=\"codeFlag == false\"\n          >\n            获取验证码\n          </div>\n          <div class=\"require_code\" v-show=\"codeFlag == true\">\n            {{ codeTime }}s后获取\n          </div>\n        </div>\n        <div class=\"code_login\" @click=\"phonelogin()\">登录</div>\n      </div>\n\n      <!-- 账号登录 -->\n      <div class=\"login_psd_form\" v-if=\"tabType == '账号登录'\">\n        <div class=\"phone\">\n          <input\n            type=\"text\"\n            placeholder=\"请输入手机号\"\n            v-model=\"psdDto.phone\"\n          />\n        </div>\n        <div class=\"password\">\n          <input\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            v-model=\"psdDto.password\"\n          />\n        </div>\n        <div class=\"other\">\n          <div class=\"forget\" @click=\"forgetPassword\">忘记密码</div>\n        </div>\n        <div class=\"psd_login\" @click=\"login()\">登录</div>\n      </div>\n\n      <div class=\"code_login_tip\">\n        <input type=\"checkbox\" checked=\"true\" />\n        未注册手机登录时会自动创建新账号，我已阅读并同意\n        <span>服务协议</span> 和 <span>隐私权条款</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      url: \"http://47.93.21.24:3001/api\",\n      tabType: \"短信登录\",\n      codeTime: 60,\n      codeFlag: false,\n      tabList: [\n        {\n          name: \"短信登录\",\n          active: true,\n        },\n        {\n          name: \"账号登录\",\n          active: false,\n        },\n      ],\n      phoneDto: {\n        phone: \"\",\n        code: \"\",\n      },\n      psdDto: {\n        phone: \"\",\n        password: \"\",\n      },\n    };\n  },\n  methods: {\n    // 切换登录方式\n    selectTab(item) {\n      for (var i = 0; i < this.tabList.length; i++) {\n        this.tabList[i].active = false;\n      }\n      this.tabType = item.name;\n      item.active = true;\n    },\n\n    // 忘记密码\n    forgetPassword() {\n      this.$router.push({\n        name: \"forget\",\n      });\n    },\n\n    // 获取验证码\n    requireCode() {\n      let _this = this;\n      if (this.phoneDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\",\n        });\n      } else {\n        this.codeFlag = true;\n        this.timer = setInterval(() => {\n          if (this.codeTime > 0) {\n            this.codeTime--;\n          } else {\n            this.codeTime = 60;\n            clearInterval(this.timer);\n          }\n        }, 1000);\n        this.$http\n          .post(this.url + \"/user/sendCode\", {\n            phone: this.phoneDto.phone,\n          })\n          .then(function (res) {\n            if (res.data.code == 200) {\n              _this.$message({\n                message: res.data.msg,\n                type: \"success\",\n              });\n            } else {\n              _this.$message({\n                message: res.data.msg,\n                type: \"warning\",\n              });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      }\n    },\n    // 手机号登录\n    phonelogin() {\n      let _this = this;\n      if (this.phoneDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\",\n        });\n      } else if (this.phoneDto.code == \"\") {\n        this.$message({\n          message: \"请填写验证码\",\n          type: \"warning\",\n        });\n      } else {\n        this.$http\n          .post(this.url + \"/user/loginByCode\", {\n            phone: this.phoneDto.phone,\n            code: this.phoneDto.code,\n          })\n          .then(function (res) {\n            if (res.data.code == 200) {\n              window.localStorage.setItem(\"X-token\", res.data.data.token);\n              _this.$message({\n                message: \"登录成功\",\n                type: \"success\",\n              });\n              setTimeout(() => {\n                _this.$router.push({\n                  name: \"index\",\n                });\n              }, 1000);\n            } else {\n              _this.$message({\n                message: res.data.msg,\n                type: \"warning\",\n              });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      }\n    },\n    // 登录\n    login() {\n      let _this = this;\n      if (this.psdDto.phone == \"\") {\n        this.$message({\n          message: \"请填写手机号\",\n          type: \"warning\",\n        });\n      } else if (this.psdDto.password == \"\") {\n        this.$message({\n          message: \"请填写密码\",\n          type: \"warning\",\n        });\n      } else {\n        this.$http\n          .post(this.url + \"/user/loginByPassword\", {\n            phone: this.psdDto.phone,\n            password: this.psdDto.password,\n          })\n          .then(function (res) {\n            console.log(res)\n            if (res.data.code == 200) {\n              window.localStorage.setItem(\"X-token\", res.data.data.token);\n              _this.$message({\n                message: \"登录成功\",\n                type: \"success\",\n              });\n              setTimeout(() => {\n                _this.$router.push({\n                  name: \"index\",\n                });\n              }, 1000);\n            } else {\n              _this.$message({\n                message: res.data.msg,\n                type: \"warning\",\n              });\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.login {\n  width: 100vw;\n  height: 100vh;\n  background: url(\"../../assets/uploads/login/loginBg.jpg\") no-repeat;\n  background-size: cover;\n  //   logo区域\n  .login_logo {\n    position: absolute;\n    top: 1rem;\n    left: 1.5rem;\n    width: 15rem;\n    img {\n      width: 100%;\n    }\n  }\n  //   表单区域\n  .login_form {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 40%;\n    padding: 2rem;\n    background-color: #fff;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\n    border-radius: 1rem;\n    .login_tabs {\n      display: flex;\n      justify-content: center;\n      .login_tab {\n        cursor: pointer;\n        width: 30%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        font-size: 1.6rem;\n        color: #333;\n        &.active {\n          font-weight: bolder;\n          .login_tab_line {\n            display: block;\n          }\n        }\n        .login_tab_line {\n          display: none;\n          width: 4rem;\n          height: 0.4rem;\n          border-radius: 0.4rem;\n          background-color: #427dff;\n        }\n      }\n    }\n    .login_msg {\n      margin-top: 1rem;\n      font-size: 0.8rem;\n      color: #666;\n    }\n    .login_code_form {\n      .phone {\n        width: 100%;\n        height: 3rem;\n        border: 0.05rem solid #ccc;\n        border-radius: 0.4rem;\n        margin-top: 1.5rem;\n        input {\n          width: 100%;\n          height: 100%;\n          border: 0;\n          background-color: transparent;\n          padding-left: 1rem;\n          font-size: 0.9rem;\n        }\n      }\n      .code {\n        position: relative;\n        width: 100%;\n        height: 3rem;\n        border: 0.05rem solid #ccc;\n        border-radius: 0.4rem;\n        margin-top: 1.5rem;\n        display: flex;\n        align-items: center;\n        input {\n          width: 100%;\n          height: 100%;\n          border: 0;\n          background-color: transparent;\n          padding-left: 1rem;\n          font-size: 0.9rem;\n        }\n        .require_code {\n          position: absolute;\n          right: 1rem;\n          padding: 0.2rem 0.5rem;\n          border: 0.05rem solid #427dff;\n          color: #427dff;\n          font-size: 0.8rem;\n          border-radius: 0.2rem;\n        }\n      }\n      .other {\n        display: flex;\n        align-items: center;\n        margin-top: 1rem;\n        span {\n          margin-left: 0.5rem;\n          color: #999;\n        }\n      }\n      .code_login {\n        width: 100%;\n        height: 3rem;\n        border-radius: 0.5rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: #427dff;\n        color: #fff;\n        font-weight: bolder;\n        cursor: pointer;\n        margin-top: 1rem;\n      }\n    }\n    .login_psd_form {\n      .phone {\n        width: 100%;\n        height: 3rem;\n        border: 0.05rem solid #ccc;\n        border-radius: 0.4rem;\n        margin-top: 1.5rem;\n        input {\n          width: 100%;\n          height: 100%;\n          border: 0;\n          background-color: transparent;\n          padding-left: 1rem;\n          font-size: 0.9rem;\n        }\n      }\n      .password {\n        position: relative;\n        width: 100%;\n        height: 3rem;\n        border: 0.05rem solid #ccc;\n        border-radius: 0.4rem;\n        margin-top: 1.5rem;\n        display: flex;\n        align-items: center;\n        input {\n          width: 100%;\n          height: 100%;\n          border: 0;\n          background-color: transparent;\n          padding-left: 1rem;\n          font-size: 0.9rem;\n        }\n      }\n      .other {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        margin-top: 1rem;\n        .remember {\n          display: flex;\n          align-items: center;\n          span {\n            margin-left: 0.5rem;\n            color: #999;\n          }\n        }\n        .forget {\n          color: #427dff;\n          font-size: 0.8rem;\n        }\n      }\n      .psd_login {\n        width: 100%;\n        height: 3rem;\n        border-radius: 0.5rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: #427dff;\n        color: #fff;\n        font-weight: bolder;\n        cursor: pointer;\n        margin-top: 1rem;\n      }\n    }\n    .code_login_tip {\n      margin-top: 1rem;\n      font-size: 0.8rem;\n      color: #999;\n      input {\n        margin-right: 0.3rem;\n      }\n      span {\n        color: #427dff;\n        font-weight: bolder;\n      }\n    }\n  }\n}\n\n@media screen and (max-width: 1080px) {\n  .login {\n    .login_form {\n      width: 60%;\n    }\n  }\n}\n@media screen and (max-width: 600px) {\n  .login {\n    .login_form {\n      width: 70%;\n    }\n  }\n}\n@media screen and (max-width: 500px) {\n  .login {\n    .login_form {\n      width: 80%;\n      .login_code_form {\n        .phone {\n          height: 4rem;\n        }\n        .code {\n          height: 4rem;\n        }\n        .code_login {\n          height: 4.2rem;\n        }\n      }\n      .login_psd_form {\n        .phone {\n          height: 4rem;\n        }\n        .password {\n          height: 4rem;\n        }\n        .psd_login {\n          height: 4.2rem;\n        }\n      }\n    }\n  }\n}\n@media screen and (max-width: 420px) {\n  input[type=\"checkbox\"] {\n    width: 1.5rem !important;\n    height: 1.5rem !important;\n  }\n  input[type=\"checkbox\"]::after {\n    width: 1.5rem !important;\n    height: 1.5rem !important;\n  }\n\n  input[type=\"checkbox\"]:checked::after {\n    font-size: 0.8rem !important;\n  }\n}\n\ninput[type=\"checkbox\"] {\n  cursor: pointer;\n  position: relative;\n  width: 1rem;\n  height: 1rem;\n  font-size: 0.9rem;\n  visibility: hidden;\n}\ninput[type=\"checkbox\"]::after {\n  position: absolute;\n  top: 0;\n  color: #666;\n  width: 1rem;\n  height: 1rem;\n  display: inline-block;\n  visibility: visible;\n  padding-left: 0px;\n  text-align: center;\n  content: \" \";\n  border-radius: 50%;\n  border: 0.05rem solid #ccc;\n}\n\ninput[type=\"checkbox\"]:checked::after {\n  content: \"✓\";\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}